{% extends "main/base_dashboard.html" %}

{% block title %}Create Task{% endblock %}

{% block content %}
<section class="create-task-section">
    <h1 style="color: #fff; text-align: center; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 30px;">
        CREATE NEW TASK
    </h1>

    <!-- Flash сообщения -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="flash-messages">
                {% for category, message in messages %}
                    <div class="flash {{ category }}">{{ message }}</div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    <form class="task-form" method="POST" action="{{ url_for('task.create_task_page') }}">
        <input type="text" name="title" placeholder="Task Name" required value="{{ request.form.title if request.form.title }}">
        <input type="date" name="deadline" value="{{ request.form.deadline if request.form.deadline }}">
        <select name="priority" required>
            <option value="">Select Priority</option>
            <option value="low" {% if request.form.priority == 'low' %}selected{% endif %}>Low</option>
            <option value="medium" {% if request.form.priority == 'medium' %}selected{% endif %}>Medium</option>
            <option value="high" {% if request.form.priority == 'high' %}selected{% endif %}>High</option>
        </select>
        <textarea name="description" placeholder="Task Description (optional)" rows="4">{{ request.form.description if request.form.description }}</textarea>
        <button type="submit">CREATE TASK</button>
    </form>

    <div style="text-align: center; margin-top: 20px;">
        <a href="{{ url_for('task.tasks_page') }}" class="auth-btn">Back to Tasks</a>
    </div>
</section>
{% endblock %}